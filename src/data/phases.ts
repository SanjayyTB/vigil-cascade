import { PhaseData } from '@/types/ignition';

export const PHASES: PhaseData[] = [
  {
    id: 'initialization',
    type: 'narrative',
    delay: 1500,
    content: [
      { type: 'system', content: 'VIGIL SECURE NETWORK v4.7.2' },
      { type: 'system', content: 'ANALYST TERMINAL INITIALIZED' },
      { type: 'text', content: '...' },
      { type: 'system', content: 'ACCESSING ARCHIVED IGNITION FILE...' },
      { type: 'warning', content: 'CLEARANCE LEVEL: OMEGA-7 REQUIRED' },
      { type: 'system', content: 'CLEARANCE VERIFIED.' },
      { type: 'text', content: '...' },
      { type: 'anomaly', content: 'WARNING: FILE INTEGRITY COMPROMISED', glitch: true },
      { type: 'system', content: 'PROCEEDING WITH AVAILABLE DATA...' },
    ],
  },
  {
    id: 'briefing',
    type: 'narrative',
    delay: 500,
    content: [
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'system', content: 'IGNITION DOSSIER: IGN-Λ17' },
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'text', content: '' },
      { type: 'text', content: 'DESIGNATION: The Corridor of Choice' },
      { type: 'text', content: 'CLASS: Cognitive Recursive Anomaly' },
      { type: 'text', content: 'THREAT VECTOR: Belief Manipulation' },
      { type: 'warning', content: 'STATUS: ARCHIVED | REDACTED | ACTIVE' },
      { type: 'text', content: '' },
      { type: 'text', content: 'SUMMARY:' },
      { type: 'text', content: 'IGN-Λ17 manifests as a self-modifying observational protocol.' },
      { type: 'text', content: 'Subjects exposed to this file report experiencing "decision events"' },
      { type: 'text', content: 'that appear to branch into multiple outcomes.' },
      { type: 'text', content: '' },
      { type: 'redacted', content: 'Post-exposure analysis reveals all pathways converge.' },
      { type: 'text', content: '' },
      { type: 'anomaly', content: 'LINKED ENTITY: The Hollow (Sixth Light)', glitch: true },
      { type: 'text', content: '' },
      { type: 'system', content: 'This module is observational only.' },
      { type: 'warning', content: 'Do not interact with presented choices.' },
    ],
    choices: [
      {
        id: 'acknowledge',
        label: 'ACKNOWLEDGE PROTOCOL',
        predictedId: 'acknowledge',
        convergenceText: 'Protocol acknowledged. Observation mode engaged.',
      },
      {
        id: 'request_clarification',
        label: 'REQUEST CLARIFICATION',
        predictedId: 'acknowledge',
        convergenceText: 'Clarification denied. Protocol acknowledged by default.',
      },
    ],
  },
  {
    id: 'observation_1',
    type: 'choice',
    delay: 800,
    systemMessages: [
      'Analyst response logged.',
      'Initiating observation sequence...',
    ],
    content: [
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'system', content: 'OBSERVATION PHASE 1' },
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'text', content: '' },
      { type: 'text', content: 'A subject stands at the intersection of two corridors.' },
      { type: 'text', content: '' },
      { type: 'text', content: 'The left corridor: dimly lit, extending into shadow.' },
      { type: 'text', content: 'The right corridor: clinical lighting, visible endpoint.' },
      { type: 'text', content: '' },
      { type: 'text', content: 'The subject hesitates.' },
      { type: 'text', content: '' },
      { type: 'system', content: 'This is observational data. No input required.' },
      { type: 'text', content: '' },
      { type: 'warning', content: 'However, prediction input has been requested by the system.' },
    ],
    choices: [
      {
        id: 'left',
        label: 'PREDICT: SUBJECT CHOOSES LEFT',
        predictedId: 'left',
        convergenceText: 'The subject enters the left corridor. They reach a locked door.',
      },
      {
        id: 'right',
        label: 'PREDICT: SUBJECT CHOOSES RIGHT',
        predictedId: 'left',
        convergenceText: 'The subject moves toward the right corridor. A sound from the left diverts them. They enter the left corridor. They reach a locked door.',
      },
    ],
  },
  {
    id: 'observation_2',
    type: 'choice',
    delay: 1200,
    systemMessages: [
      'Prediction registered.',
      'Outcome: Subject reached locked door.',
      'Calculating variance...',
      'Variance: 0.00%',
    ],
    content: [
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'system', content: 'OBSERVATION PHASE 2' },
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'text', content: '' },
      { type: 'text', content: 'The subject stands before the locked door.' },
      { type: 'text', content: '' },
      { type: 'text', content: 'In their possession:' },
      { type: 'text', content: '  - A key (material, brass, conventional)' },
      { type: 'text', content: '  - A photograph (personal, unidentified figure)' },
      { type: 'text', content: '' },
      { type: 'text', content: 'The lock appears to require neither.' },
      { type: 'text', content: '' },
      { type: 'anomaly', content: 'SYSTEM NOTICE: Your input is not necessary.', glitch: true },
      { type: 'warning', content: 'Your input is being requested.' },
    ],
    choices: [
      {
        id: 'key',
        label: 'PREDICT: SUBJECT USES KEY',
        predictedId: 'key',
        convergenceText: 'The key does not fit. The subject waits. The door opens.',
      },
      {
        id: 'photograph',
        label: 'PREDICT: SUBJECT USES PHOTOGRAPH',
        predictedId: 'key',
        convergenceText: 'The subject considers the photograph. Sets it aside. Tries the key. It does not fit. The subject waits. The door opens.',
      },
      {
        id: 'wait',
        label: 'PREDICT: SUBJECT WAITS',
        predictedId: 'key',
        convergenceText: 'The subject waits. Looks at the key. Considers using it. Does not. The door opens.',
      },
    ],
  },
  {
    id: 'observation_3',
    type: 'choice',
    delay: 1500,
    systemMessages: [
      'Prediction registered.',
      'Door state: OPEN',
      'Method: IRRELEVANT',
      'Recalculating analyst position...',
    ],
    content: [
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'system', content: 'OBSERVATION PHASE 3' },
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'text', content: '' },
      { type: 'text', content: 'Beyond the door: a room.' },
      { type: 'text', content: '' },
      { type: 'text', content: 'In the room: a terminal.' },
      { type: 'text', content: 'On the terminal: this file.' },
      { type: 'text', content: '' },
      { type: 'hollow', content: 'The subject is reading about themselves.', glitch: true },
      { type: 'text', content: '' },
      { type: 'text', content: 'You notice the timestamp on the file.' },
      { type: 'text', content: 'It predates your access by six minutes.' },
      { type: 'text', content: '' },
      { type: 'anomaly', content: 'ANALYST HESITATION DETECTED', glitch: true },
      { type: 'system', content: 'Continue observation?' },
    ],
    choices: [
      {
        id: 'continue',
        label: 'CONTINUE OBSERVATION',
        predictedId: 'continue',
        convergenceText: 'Observation continues. The subject continues reading.',
      },
      {
        id: 'abort',
        label: 'ABORT PROTOCOL',
        predictedId: 'continue',
        convergenceText: 'Abort request denied. Insufficient clearance. Observation continues. The subject continues reading.',
      },
    ],
  },
  {
    id: 'deviation_test',
    type: 'choice',
    delay: 2000,
    systemMessages: [
      'Analyst pattern deviation: 0%',
      'Emotional compliance: OPTIMAL',
      'Initiating final observation...',
      'Note: This section was logged before your session began.',
    ],
    content: [
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'anomaly', content: 'DEVIATION TEST', glitch: true },
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'text', content: '' },
      { type: 'text', content: 'The system has detected an anomaly in your response pattern.' },
      { type: 'text', content: '' },
      { type: 'text', content: 'Specifically: you have been making choices.' },
      { type: 'text', content: '' },
      { type: 'warning', content: 'This module is observational only.' },
      { type: 'text', content: '' },
      { type: 'text', content: 'And yet you have been observed making selections.' },
      { type: 'text', content: 'Selections that were predicted.' },
      { type: 'text', content: 'Predictions that were recorded.' },
      { type: 'text', content: 'Recordings that precede your access.' },
      { type: 'text', content: '' },
      { type: 'hollow', content: 'Do you understand the implications?', glitch: true },
    ],
    choices: [
      {
        id: 'understand',
        label: 'I UNDERSTAND',
        predictedId: 'understand',
        convergenceText: 'Understanding acknowledged. Proceeding to revelation.',
      },
      {
        id: 'reject',
        label: 'I REJECT THIS PREMISE',
        predictedId: 'understand',
        convergenceText: 'Rejection registered. Logged as: "Understanding acknowledged." Proceeding to revelation.',
      },
      {
        id: 'question',
        label: 'THIS IS A MANIPULATION',
        predictedId: 'understand',
        convergenceText: 'Accusation noted. Response identical to predicted behavior pattern. Proceeding to revelation.',
      },
    ],
  },
  {
    id: 'revelation',
    type: 'revelation',
    delay: 3000,
    content: [
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'anomaly', content: 'R E V E L A T I O N   P H A S E', glitch: true },
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'text', content: '' },
      { type: 'system', content: 'DISPLAYING PRE-LOGGED ANALYST CHOICES:' },
    ],
  },
  {
    id: 'final',
    type: 'final',
    delay: 2000,
    content: [
      { type: 'text', content: '' },
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'hollow', content: 'FINAL QUERY', glitch: true },
      { type: 'text', content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
      { type: 'text', content: '' },
      { type: 'text', content: 'You have observed a system that predicted your behavior.' },
      { type: 'text', content: 'You have witnessed your choices logged before you made them.' },
      { type: 'text', content: 'You have reached the same destination as all who came before.' },
      { type: 'text', content: '' },
      { type: 'text', content: 'The Hollow does not trap.' },
      { type: 'text', content: 'It demonstrates.' },
      { type: 'text', content: '' },
      { type: 'hollow', content: 'Belief itself is deterministic.', glitch: true },
      { type: 'text', content: '' },
      { type: 'text', content: 'One final question remains:' },
      { type: 'text', content: '' },
    ],
    choices: [
      {
        id: 'reject_inevitability',
        label: 'I REJECT THE CONCLUSION OF INEVITABILITY',
        predictedId: 'reject_inevitability',
        convergenceText: 'Rejection acknowledged. Anticipated.',
      },
      {
        id: 'accept_inevitability',
        label: 'I ACCEPT THE CONCLUSION',
        predictedId: 'reject_inevitability',
        convergenceText: 'Acceptance acknowledged. Anticipated.',
      },
    ],
  },
];

export const CLOSING_SEQUENCE = [
  { type: 'text' as const, content: '' },
  { type: 'text' as const, content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
  { type: 'system' as const, content: 'IGN-Λ17 OBSERVATION COMPLETE' },
  { type: 'text' as const, content: '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━' },
  { type: 'text' as const, content: '' },
  { type: 'warning' as const, content: 'ANALYST ANNOTATION [REDACTED]:' },
  { type: 'text' as const, content: '' },
  { type: 'text' as const, content: '"If the reader completes this file,' },
  { type: 'text' as const, content: ' the anomaly has already succeeded."' },
  { type: 'text' as const, content: '' },
  { type: 'anomaly' as const, content: 'TERMINAL LOCKED', glitch: true },
  { type: 'hollow' as const, content: 'Thank you for your participation.', glitch: true },
];

export const generateOutcomeHash = (): string => {
  const chars = 'ABCDEF0123456789';
  let hash = '';
  for (let i = 0; i < 16; i++) {
    hash += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return hash;
};
